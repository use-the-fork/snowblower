# This file is automatically generated by SnowBlower.
# Do not edit this file directly as your changes will be overwritten.
# Instead, modify your flake.nix configuration to update Docker services.

networks:
  snownet:
    driver: bridge
services:
  builder:
    build:
      args:
        USER_GID: ${SB_USER_GID:-1000}
        USER_UID: ${SB_USER_UID:-1000}
      context: ./
      dockerfile: docker/Dockerfile.builder
    environment:
      SB_PROJECT_HASH: ${SB_PROJECT_HASH}
      SB_PROJECT_PROFILE: /snowblower/profile
      SB_PROJECT_ROOT: /snowblower
      SB_PROJECT_STATE: /snowblower/state
      SB_USER_GID: ${SB_USER_GID}
      SB_USER_UID: ${SB_USER_UID}
      SB_WORKSPACE_ROOT: /workspace
    networks:
    - snownet
    profiles:
    - manual-start
    restart: 'no'
    user: ${SB_USER_UID}:${SB_USER_GID}
    volumes:
    - .:/workspace
    - snowblower-nix:/nix
    - ${SB_PROJECT_PROFILE:-/tmp/snowblower/profile}:/snowblower/profile
    - ${SB_PROJECT_STATE:-/tmp/snowblower/state}:/snowblower/state
    - ${SB_PROJECT_ROOT:-/tmp/snowblower}:/snowblower
  oxker:
    container_name: oxker
    environment:
      SB_PROJECT_HASH: ${SB_PROJECT_HASH}
      SB_PROJECT_PROFILE: /snowblower/profile
      SB_PROJECT_ROOT: /snowblower
      SB_PROJECT_STATE: /snowblower/state
      SB_USER_GID: ${SB_USER_GID}
      SB_USER_UID: ${SB_USER_UID}
      SB_WORKSPACE_ROOT: /workspace
    image: ghcr.io/mrjackwills/oxker:latest
    networks:
    - snownet
    profiles:
    - manual-start
    restart: 'no'
    user: ${SB_USER_UID}:${SB_USER_GID}
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock:ro
  runtime:
    depends_on: []
    environment:
      SB_PROJECT_HASH: ${SB_PROJECT_HASH}
      SB_PROJECT_PROFILE: /snowblower/profile
      SB_PROJECT_ROOT: /snowblower
      SB_PROJECT_STATE: /snowblower/state
      SB_USER_GID: ${SB_USER_GID}
      SB_USER_UID: ${SB_USER_UID}
      SB_WORKSPACE_ROOT: /workspace
    image: localhost/snowblower/runtime:latest
    networks:
    - snownet
    profiles:
    - auto-start
    restart: 'no'
    tty: true
    user: ${SB_USER_UID}:${SB_USER_GID}
    volumes:
    - .:/workspace
    - ${SB_PROJECT_PROFILE:-/tmp/snowblower/profile}:/snowblower/profile
    - ${SB_PROJECT_STATE:-/tmp/snowblower/state}:/snowblower/state
    - ${SB_PROJECT_ROOT:-/tmp/snowblower}:/snowblower
    working_dir: /workspace
  tools:
    environment:
      SB_PROJECT_HASH: ${SB_PROJECT_HASH}
      SB_PROJECT_PROFILE: /snowblower/profile
      SB_PROJECT_ROOT: /snowblower
      SB_PROJECT_STATE: /snowblower/state
      SB_USER_GID: ${SB_USER_GID}
      SB_USER_UID: ${SB_USER_UID}
      SB_WORKSPACE_ROOT: /workspace
    image: snowblower/snow-blower-r335e10bbad6148d4387dbf0d147bec7a/tools:latest
    networks:
    - snownet
    profiles:
    - auto-start
    restart: 'no'
    tty: true
    user: ${SB_USER_UID}:${SB_USER_GID}
    volumes:
    - .:/workspace
    - ${SB_PROJECT_PROFILE:-/tmp/snowblower/profile}:/snowblower/profile
    - ${SB_PROJECT_STATE:-/tmp/snowblower/state}:/snowblower/state
    working_dir: /workspace
volumes:
  snowblower-nix:
    external: true
